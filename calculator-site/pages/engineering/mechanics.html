<!DOCTYPE html>
<html lang="auto">
<head>
<meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title data-i18n="title">Physics Calculator | é«˜çº§åŠ›å­¦è®¡ç®—å™¨</title>
    <meta name="description" content="Advanced mechanics calculator supporting various physics formulas, unit conversions, night mode, and visual charts. Ideal for students, teachers, and physics enthusiasts." />
    <meta name="keywords" content="mechanics calculator, physics formulas, Newton's laws, kinematics, unit conversion, science tools, online physics calculator, high school physics, college physics, physics equations" />
    <meta name="author" content="Calculator2U" />
    <!-- ä¸­æ–‡ Meta Tags -->
    <meta name="description" lang="zh" content="é«˜çº§åŠ›å­¦è®¡ç®—å™¨ï¼Œæ”¯æŒå¤šç§ç‰©ç†å…¬å¼è®¡ç®—ã€å•ä½è½¬æ¢ã€å¤œé—´æ¨¡å¼å’Œå¯è§†åŒ–å›¾è¡¨ã€‚é€‚ç”¨äºå­¦ç”Ÿã€æ•™å¸ˆå’Œç‰©ç†çˆ±å¥½è€…ã€‚" />
    <meta name="keywords" lang="zh" content="åŠ›å­¦è®¡ç®—å™¨, ç‰©ç†å…¬å¼, ç‰›é¡¿å®šå¾‹, è¿åŠ¨å­¦, å•ä½è½¬æ¢, ç§‘å­¦å·¥å…·, åœ¨çº¿ç‰©ç†è®¡ç®—å™¨, é«˜ä¸­ç‰©ç†, å¤§å­¦ç‰©ç†, ç‰©ç†æ–¹ç¨‹" />
    <!-- Open Graph æ ‡ç­¾ -->
    <meta property="og:title" content="é«˜çº§åŠ›å­¦è®¡ç®—å™¨ | Physics Calculator" />
    <meta property="og:description" content="é«˜çº§åŠ›å­¦è®¡ç®—å™¨ï¼Œæ”¯æŒå¤šç§ç‰©ç†å…¬å¼è®¡ç®—ã€å•ä½è½¬æ¢ã€å¤œé—´æ¨¡å¼å’Œå¯è§†åŒ–å›¾è¡¨ã€‚é€‚ç”¨äºå­¦ç”Ÿã€æ•™å¸ˆå’Œç‰©ç†çˆ±å¥½è€…ã€‚" />
    <meta property="og:type" content="website" />
    <meta property="og:image" content="https://www.calculator2u.com/assets/images/physics-calculator.jpg" />
    <meta property="og:locale" content="zh_CN" />
    <meta property="og:site_name" content="Calculator2U" />
    <!-- ä¿®æ­£åçš„è„šæœ¬å’Œæ ·å¼è¡¨é“¾æ¥ -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/katex@0.16.8/dist/katex.min.js"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.8/dist/katex.min.css" />
    <!-- æ·»åŠ æ›´å¤šè¯­è¨€ç‰ˆæœ¬é“¾æ¥ -->
    <link rel="alternate" hreflang="en" href="https://Calculator2U/en/physics-calculator" />
    <link rel="alternate" hreflang="zh" href="https://Calculator2U/zh/physics-calculator" />

<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-RLH4FLZBZF"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-RLH4FLZBZF');
</script>
  <style>
    :root {
      --primary-color: #006d77;
      --secondary-color: #003f5c;
      --text-color: #333;
      --bg-color: #f9f9f9;
      --card-bg: #fff;
      --border-color: #ddd;
      --result-bg: #e9f0fb;
      --shadow: 0 3px 12px rgba(0, 0, 0, 0.1);
      --nav-bg: #006d77;
      --footer-bg: #f0f0f0;
    }

    [data-theme="dark"] {
      --primary-color: #4db5bd;
      --secondary-color: #2c698d;
      --text-color: #e6e6e6;
      --bg-color: #1a1a2e;
      --card-bg: #16213e;
      --border-color: #2a2a4a;
      --result-bg: #1f4068;
      --shadow: 0 3px 12px rgba(0, 0, 0, 0.3);
      --nav-bg: #0f3460;
      --footer-bg: #0f3460;
    }

    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      margin: 0; 
      background: var(--bg-color); 
      color: var(--text-color);
      display: flex; 
      flex-direction: column; 
      min-height: 100vh;
      transition: background-color 0.3s, color 0.3s;
    }

    .navbar {
      background-color: var(--nav-bg);
      padding: 1rem 2rem;
      display: flex;
      justify-content: space-between;
      align-items: center;
      flex-wrap: wrap;
      transition: background-color 0.3s;
    }

    .navbar .logo {
      color: #fff;
      font-size: 1.5rem;
      font-weight: bold;
      text-decoration: none;
    }

    .nav-links {
      list-style: none;
      display: flex;
      gap: 1.2rem;
      margin: 0;
      padding-left: 0;
      align-items: center;
    }

    .nav-links a {
      color: #fff;
      text-decoration: none;
      font-weight: 500;
    }

    .control-buttons {
      display: flex;
      gap: 0.8rem;
    }

    .control-btn {
      background: rgba(255, 255, 255, 0.15);
      border: 1.5px solid #fff;
      color: #fff;
      padding: 0.3rem 0.8rem;
      border-radius: 4px;
      cursor: pointer;
      font-weight: 600;
      transition: background 0.3s;
      display: flex;
      align-items: center;
      gap: 5px;
    }

    .control-btn:hover {
      background: rgba(255, 255, 255, 0.3);
    }

    main.container {
      max-width: 800px;
      margin: 2rem auto 3rem auto;
      background: var(--card-bg);
      padding: 1.5rem 2rem;
      border-radius: 10px;
      box-shadow: var(--shadow);
      flex-grow: 1;
      transition: background-color 0.3s, box-shadow 0.3s;
    }

    h1 {
      text-align: center;
      color: var(--primary-color);
      font-size: 2rem;
      margin-bottom: 0.5rem;
      transition: color 0.3s;
    }

    p.desc {
      text-align: center;
      font-size: 1rem;
      color: var(--text-color);
      margin-bottom: 2rem;
      transition: color 0.3s;
    }

    .formula-selection {
      margin-bottom: 1.5rem;
    }

    .formula-group {
      margin-bottom: 1rem;
    }

    .formula-group h3 {
      color: var(--primary-color);
      margin-bottom: 0.5rem;
      padding-bottom: 0.3rem;
      border-bottom: 2px solid var(--border-color);
      transition: color 0.3s, border-color 0.3s;
    }

    .formula-options {
      display: flex;
      flex-wrap: wrap;
      gap: 0.8rem;
    }

    .formula-btn {
      background: rgba(0, 111, 119, 0.1);
      border: 1px solid var(--border-color);
      border-radius: 6px;
      padding: 0.6rem 1rem;
      cursor: pointer;
      font-size: 0.9rem;
      transition: all 0.3s;
      color: var(--text-color);
    }

    .formula-btn:hover {
      background: rgba(0, 111, 119, 0.2);
      border-color: var(--primary-color);
    }

    .formula-btn.active {
      background: var(--primary-color);
      color: white;
      border-color: var(--primary-color);
    }

    form.calc-form {
      display: flex;
      flex-direction: column;
      gap: 1rem;
    }

    .input-group {
      display: flex;
      flex-wrap: wrap;
      gap: 1rem;
    }

    .input-container {
      flex: 1;
      min-width: 200px;
    }

    label {
      font-weight: 600;
      margin-bottom: 0.3rem;
      display: block;
      color: var(--primary-color);
      transition: color 0.3s;
    }

    input[type="number"], select {
      padding: 0.6rem;
      font-size: 1rem;
      border-radius: 5px;
      border: 1.5px solid var(--border-color);
      width: 100%;
      box-sizing: border-box;
      background: var(--card-bg);
      color: var(--text-color);
      transition: all 0.3s;
    }

    .unit-group {
      display: flex;
      gap: 0.5rem;
      margin-top: 0.3rem;
    }

    .unit-group select {
      flex: 1;
    }

    button {
      background-color: var(--secondary-color);
      color: white;
      font-weight: 700;
      border: none;
      padding: 0.7rem 1rem;
      border-radius: 6px;
      cursor: pointer;
      font-size: 1rem;
      transition: background-color 0.3s ease;
    }

    button:hover {
      background-color: var(--primary-color);
    }

    .action-buttons {
      display: flex;
      gap: 1rem;
      margin-top: 0.5rem;
    }

    .action-buttons button {
      flex: 1;
    }

    .result-container {
      margin-top: 1.5rem;
      display: flex;
      flex-direction: column;
      gap: 1rem;
    }

    .result-box {
      background: var(--result-bg);
      padding: 1rem;
      border-radius: 8px;
      font-family: 'Courier New', monospace;
      font-size: 1.1rem;
      color: var(--text-color);
      white-space: pre-wrap;
      word-break: break-word;
      min-height: 3em;
      transition: background-color 0.3s, color 0.3s;
    }

    .formula-display {
      background: rgba(0, 63, 92, 0.1);
      padding: 1rem;
      border-radius: 8px;
      border-left: 4px solid var(--primary-color);
      font-size: 1.1rem;
      text-align: center;
      min-height: 60px;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: background-color 0.3s;
    }

    .katex-display {
      margin: 0 !important;
      padding: 5px 0;
    }

    .chart-container {
      margin-top: 1.5rem;
      height: 300px;
      background: var(--card-bg);
      border-radius: 8px;
      padding: 10px;
    }

    footer {
      text-align: center;
      padding: 1.5rem 1rem;
      background: var(--footer-bg);
      font-size: 0.9rem;
      color: var(--text-color);
      user-select: none;
      transition: background-color 0.3s, color 0.3s;
    }

    footer a {
      color: var(--primary-color);
      text-decoration: none;
    }

    @media (max-width: 768px) {
      main.container {
        margin: 1rem;
        padding: 1rem;
      }
      
      .nav-links {
        gap: 0.8rem;
      }
      
      h1 {
        font-size: 1.7rem;
      }
      
      .input-group {
        flex-direction: column;
      }
    }

    @media (max-width: 480px) {
      .navbar {
        padding: 1rem;
        flex-direction: column;
        gap: 1rem;
      }
      
      .nav-links {
        flex-wrap: wrap;
        justify-content: center;
      }
      
      h1 {
        font-size: 1.5rem;
      }
      
      .action-buttons {
        flex-direction: column;
      }
      
      .control-buttons {
        width: 100%;
        justify-content: center;
      }
      
      .chart-container {
        height: 250px;
      }
    }
  </style>
</head>
<body>
<header>

    <nav class="navbar">
      <a href="/index.html" class="logo">Calculator2U</a>
      <ul class="nav-links">
        <li><a href="/pages/health/index.html" data-i18n="nav_health">å¥åº·ä¸èº«ä½“</a></li>
        <li><a href="/pages/finance/index.html" data-i18n="nav_finance">è´¢åŠ¡ä¸æŠ•èµ„</a></li>
        <li><a href="/pages/education/index.html" data-i18n="nav_education">æ•™è‚²ä¸å­¦ä¹ </a></li>
        <li><a href="/pages/engineering/index.html" data-i18n="nav_engineering">å·¥ç¨‹ä¸ç§‘å­¦</a></li>
        <li><a href="/pages/daily-life/index.html" data-i18n="nav_daily_life">æ—¥å¸¸ç”Ÿæ´»</a></li>
        <li><a href="/about.html" data-i18n="nav_about_us">å…³äºæˆ‘ä»¬</a></li>
      </ul>
      <div class="control-buttons">
        <button class="control-btn" id="theme-toggle">
          <span id="theme-icon">ğŸŒ™</span>
          <span data-i18n="dark_mode">å¤œé—´æ¨¡å¼</span>
        </button>
        <button class="control-btn" id="lang-switch">
          <span data-i18n="language">EN</span>
        </button>
      </div>
    </nav>
</header>

  <main class="container">
    <h1 data-i18n="title">é«˜çº§åŠ›å­¦è®¡ç®—å™¨</h1>
    <p class="desc" data-i18n="desc">é€‰æ‹©ç‰©ç†å…¬å¼ï¼Œè¾“å…¥å‚æ•°å€¼ï¼Œè‡ªåŠ¨è®¡ç®—ç»“æœå¹¶æä¾›å›¾è¡¨å¯è§†åŒ–</p>
    
    <div class="formula-selection">
      <div class="formula-group">
        <h3 data-i18n="newton_laws">ç‰›é¡¿å®šå¾‹</h3>
        <div class="formula-options">
          <button class="formula-btn" data-formula="newton_second" data-i18n="newton_second_law">ç‰›é¡¿ç¬¬äºŒå®šå¾‹ (F=ma)</button>
        </div>
      </div>
      
      <div class="formula-group">
        <h3 data-i18n="kinematics">è¿åŠ¨å­¦</h3>
        <div class="formula-options">
          <button class="formula-btn" data-formula="final_velocity" data-i18n="final_velocity">æœ«é€Ÿåº¦ (v = u + at)</button>
          <button class="formula-btn" data-formula="displacement" data-i18n="displacement">ä½ç§» (s = ut + Â½atÂ²)</button>
          <button class="formula-btn" data-formula="displacement_no_acc" data-i18n="displacement_no_acc">ä½ç§» (æ— åŠ é€Ÿåº¦)</button>
          <button class="formula-btn" data-formula="velocity_no_time" data-i18n="velocity_no_time">æœ«é€Ÿåº¦ (æ— æ—¶é—´)</button>
        </div>
      </div>
      
      <div class="formula-group">
        <h3 data-i18n="force_friction">åŠ›ä¸æ‘©æ“¦</h3>
        <div class="formula-options">
          <button class="formula-btn" data-formula="friction" data-i18n="frictional_force">æ‘©æ“¦åŠ›</button>
          <button class="formula-btn" data-formula="centripetal" data-i18n="centripetal_force">å‘å¿ƒåŠ›</button>
          <button class="formula-btn" data-formula="resultant" data-i18n="resultant_force">åˆåŠ›</button>
          <button class="formula-btn" data-formula="torque" data-i18n="torque">æ‰­çŸ©</button>
        </div>
      </div>
      
      <div class="formula-group">
        <h3 data-i18n="work_energy">åŠŸã€èƒ½é‡ä¸åŠŸç‡</h3>
        <div class="formula-options">
          <button class="formula-btn" data-formula="kinetic" data-i18n="kinetic_energy">åŠ¨èƒ½</button>
          <button class="formula-btn" data-formula="potential" data-i18n="potential_energy">åŠ¿èƒ½</button>
          <button class="formula-btn" data-formula="mechanical" data-i18n="mechanical_energy">æœºæ¢°èƒ½</button>
          <button class="formula-btn" data-formula="work" data-i18n="work_done">åŠŸ</button>
        </div>
      </div>
    </div>
    
    <form class="calc-form" onsubmit="return false;">
      <div class="input-group" id="inputFields">
        <!-- Dynamic input fields will be inserted here -->
      </div>
      
      <div class="action-buttons">
        <button type="button" id="calcBtn" data-i18n="calc_btn">è®¡ç®—</button>
        <button type="button" id="clearBtn" data-i18n="clear_btn">æ¸…é™¤</button>
      </div>
    </form>

    
    <div class="result-container">
      <div class="formula-display" id="formulaDisplay">
        <!-- Formula display will be inserted here -->
      </div>
      
      <div class="result-box" id="resultBox" aria-live="polite" aria-atomic="true"></div>
    </div>
    
    <div class="chart-container">
      <canvas id="physicsChart"></canvas>
    </div>
  </main>

  <footer>

    <p>&copy; 2025 Calculator2U. <span data-i18n="footer_rights">ä¿ç•™æ‰€æœ‰æƒåˆ©ã€‚</span> | 
      <a href="/privacy.html" data-i18n="footer_privacy_policy">éšç§æ”¿ç­–</a> | 
      <a href="/terms.html" data-i18n="footer_terms_of_service">ä½¿ç”¨æ¡æ¬¾</a></p>
  </footer>

  <script>
    (() => {
      // æ‰©å±•ç¿»è¯‘å†…å®¹
      const translations = {
        zh: {
          title: "é«˜çº§åŠ›å­¦è®¡ç®—å™¨",
          desc: "é€‰æ‹©ç‰©ç†å…¬å¼ï¼Œè¾“å…¥å‚æ•°å€¼ï¼Œè‡ªåŠ¨è®¡ç®—ç»“æœå¹¶æä¾›å›¾è¡¨å¯è§†åŒ–",
          nav_health: "å¥åº·ä¸èº«ä½“",
          nav_finance: "è´¢åŠ¡ä¸æŠ•èµ„",
          nav_education: "æ•™è‚²ä¸å­¦ä¹ ",
          nav_engineering: "å·¥ç¨‹ä¸ç§‘å­¦",
          nav_daily_life: "æ—¥å¸¸ç”Ÿæ´»",
          nav_about_us: "å…³äºæˆ‘ä»¬",
          dark_mode: "å¤œé—´æ¨¡å¼",
          language: "EN",
          calc_btn: "è®¡ç®—",
          clear_btn: "æ¸…é™¤",
          footer_privacy_policy: "éšç§æ”¿ç­–",
          footer_terms_of_service: "ä½¿ç”¨æ¡æ¬¾",
          footer_rights: "ä¿ç•™æ‰€æœ‰æƒåˆ©ã€‚",
          newton_laws: "ç‰›é¡¿å®šå¾‹",
          newton_second_law: "ç‰›é¡¿ç¬¬äºŒå®šå¾‹ (F=ma)",
          kinematics: "è¿åŠ¨å­¦",
          final_velocity: "æœ«é€Ÿåº¦ (v = u + at)",
          displacement: "ä½ç§» (s = ut + Â½atÂ²)",
          displacement_no_acc: "ä½ç§» (æ— åŠ é€Ÿåº¦)",
          velocity_no_time: "æœ«é€Ÿåº¦ (æ— æ—¶é—´)",
          force_friction: "åŠ›ä¸æ‘©æ“¦",
          frictional_force: "æ‘©æ“¦åŠ›",
          centripetal_force: "å‘å¿ƒåŠ›",
          resultant_force: "åˆåŠ›",
          torque: "æ‰­çŸ©",
          work_energy: "åŠŸã€èƒ½é‡ä¸åŠŸç‡",
          kinetic_energy: "åŠ¨èƒ½",
          potential_energy: "åŠ¿èƒ½",
          mechanical_energy: "æœºæ¢°èƒ½",
          work_done: "åŠŸ",
          err_two_values: "è¯·è‡³å°‘è¾“å…¥ä¸¤ä¸ªæ•°å€¼ã€‚",
          err_invalid: "è¾“å…¥çš„å€¼å¿…é¡»æ˜¯éè´Ÿæ•°å­—ã€‚",
          result_force: "åŠ› (F)",
          result_mass: "è´¨é‡ (m)",
          result_acceleration: "åŠ é€Ÿåº¦ (a)",
          unit_n: "ç‰›é¡¿ (N)",
          unit_kg: "åƒå…‹ (kg)",
          unit_ms2: "ç±³/ç§’Â² (m/sÂ²)",
          unit_m: "ç±³ (m)",
          unit_s: "ç§’ (s)",
          unit_ms: "ç±³/ç§’ (m/s)",
          unit_j: "ç„¦è€³ (J)",
          unit_nm: "ç‰›é¡¿Â·ç±³ (NÂ·m)",
          unit_degree: "åº¦",
          unit_coeff: "ç³»æ•°",
          initial_velocity: "åˆé€Ÿåº¦ (u)",
          time: "æ—¶é—´ (t)",
          displacement_s: "ä½ç§» (s)",
          final_velocity_v: "æœ«é€Ÿåº¦ (v)",
          friction_coeff: "æ‘©æ“¦ç³»æ•° (Î¼)",
          normal_force: "æ³•å‘åŠ› (N)",
          mass_m: "è´¨é‡ (m)",
          velocity_v: "é€Ÿåº¦ (v)",
          radius_r: "åŠå¾„ (r)",
          force_f: "åŠ› (F)",
          angle_theta: "è§’åº¦ (Î¸)",
          distance_d: "è·ç¦» (d)",
          height_h: "é«˜åº¦ (h)",
          gravity_g: "é‡åŠ›åŠ é€Ÿåº¦ (g)",
          power_p: "åŠŸç‡ (P)"
        },
        en: {
          title: "Advanced Physics Calculator",
          desc: "Select a physics formula, input parameter values, and get results with visualization",
          nav_health: "Health & Body",
          nav_finance: "Finance & Investment",
          nav_education: "Education & Learning",
          nav_engineering: "Engineering & Science",
          nav_daily_life: "Daily Life",
          nav_about_us: "About Us",
          dark_mode: "Dark Mode",
          language: "ä¸­æ–‡",
          calc_btn: "Calculate",
          clear_btn: "Clear",
          footer_privacy_policy: "Privacy Policy",
          footer_terms_of_service: "Terms of Service",
          footer_rights: "All rights reserved.",
          newton_laws: "Newton's Laws",
          newton_second_law: "Newton's Second Law (F=ma)",
          kinematics: "Kinematics",
          final_velocity: "Final Velocity (v = u + at)",
          displacement: "Displacement (s = ut + Â½atÂ²)",
          displacement_no_acc: "Displacement (no acceleration)",
          velocity_no_time: "Final Velocity (no time)",
          force_friction: "Force & Friction",
          frictional_force: "Frictional Force",
          centripetal_force: "Centripetal Force",
          resultant_force: "Resultant Force",
          torque: "Torque",
          work_energy: "Work, Energy & Power",
          kinetic_energy: "Kinetic Energy",
          potential_energy: "Potential Energy",
          mechanical_energy: "Mechanical Energy",
          work_done: "Work Done",
          err_two_values: "Please enter at least two values.",
          err_invalid: "Values must be non-negative numbers.",
          result_force: "Force (F)",
          result_mass: "Mass (m)",
          result_acceleration: "Acceleration (a)",
          unit_n: "Newtons (N)",
          unit_kg: "Kilograms (kg)",
          unit_ms2: "m/sÂ²",
          unit_m: "Meters (m)",
          unit_s: "Seconds (s)",
          unit_ms: "m/s",
          unit_j: "Joules (J)",
          unit_nm: "Newton-meters (NÂ·m)",
          unit_degree: "Degrees",
          unit_coeff: "Coefficient",
          initial_velocity: "Initial Velocity (u)",
          time: "Time (t)",
          displacement_s: "Displacement (s)",
          final_velocity_v: "Final Velocity (v)",
          friction_coeff: "Friction Coefficient (Î¼)",
          normal_force: "Normal Force (N)",
          mass_m: "Mass (m)",
          velocity_v: "Velocity (v)",
          radius_r: "Radius (r)",
          force_f: "Force (F)",
          angle_theta: "Angle (Î¸)",
          distance_d: "Distance (d)",
          height_h: "Height (h)",
          gravity_g: "Gravity (g)",
          power_p: "Power (P)"
        }
      };

      // å®šä¹‰å…¬å¼é›†åˆ
      const formulas = {
        newton_second: {
          name: { zh: "ç‰›é¡¿ç¬¬äºŒå®šå¾‹", en: "Newton's Second Law" },
          equation: { zh: "F = m Ã— a", en: "F = m Ã— a" },
          latex: "F = m \\times a",
          inputs: [
            { id: "force", label: { zh: "åŠ› (F)", en: "Force (F)" }, units: ["N", "lbf"], defaultUnit: "N" },
            { id: "mass", label: { zh: "è´¨é‡ (m)", en: "Mass (m)" }, units: ["kg", "g", "lb"], defaultUnit: "kg" },
            { id: "acceleration", label: { zh: "åŠ é€Ÿåº¦ (a)", en: "Acceleration (a)" }, units: ["m/sÂ²", "ft/sÂ²"], defaultUnit: "m/sÂ²" }
          ],
          calculate: (inputs) => {
            const F = inputs.force ? parseFloat(inputs.force.value) : null;
            const m = inputs.mass ? parseFloat(inputs.mass.value) : null;
            const a = inputs.acceleration ? parseFloat(inputs.acceleration.value) : null;
            
            if (F !== null && m !== null && a === null) {
              return { result: F / m, unit: "m/sÂ²", formula: `a = F / m = ${F} / ${m}` };
            } else if (F !== null && a !== null && m === null) {
              return { result: F / a, unit: "kg", formula: `m = F / a = ${F} / ${a}` };
            } else if (m !== null && a !== null && F === null) {
              return { result: m * a, unit: "N", formula: `F = m Ã— a = ${m} Ã— ${a}` };
            }
            return null;
          }
        },
        final_velocity: {
          name: { zh: "æœ«é€Ÿåº¦", en: "Final Velocity" },
          equation: { zh: "v = u + a Ã— t", en: "v = u + a Ã— t" },
          latex: "v = u + a \\times t",
          inputs: [
            { id: "initial_velocity", label: { zh: "åˆé€Ÿåº¦ (u)", en: "Initial Velocity (u)" }, units: ["m/s", "km/h", "mph"], defaultUnit: "m/s" },
            { id: "acceleration", label: { zh: "åŠ é€Ÿåº¦ (a)", en: "Acceleration (a)" }, units: ["m/sÂ²", "ft/sÂ²"], defaultUnit: "m/sÂ²" },
            { id: "time", label: { zh: "æ—¶é—´ (t)", en: "Time (t)" }, units: ["s", "min", "h"], defaultUnit: "s" },
            { id: "final_velocity", label: { zh: "æœ«é€Ÿåº¦ (v)", en: "Final Velocity (v)" }, units: ["m/s", "km/h", "mph"], defaultUnit: "m/s" }
          ],
          calculate: (inputs) => {
            const u = inputs.initial_velocity ? parseFloat(inputs.initial_velocity.value) : null;
            const a = inputs.acceleration ? parseFloat(inputs.acceleration.value) : null;
            const t = inputs.time ? parseFloat(inputs.time.value) : null;
            const v = inputs.final_velocity ? parseFloat(inputs.final_velocity.value) : null;
            
            if (u !== null && a !== null && t !== null && v === null) {
              return { result: u + a * t, unit: "m/s", formula: `v = u + a Ã— t = ${u} + ${a} Ã— ${t}` };
            }
            return null;
          }
        },
        friction: {
          name: { zh: "æ‘©æ“¦åŠ›", en: "Frictional Force" },
          equation: { zh: "F_friction = Î¼ Ã— N", en: "F_friction = Î¼ Ã— N" },
          latex: "F_{friction} = \\mu \\times N",
          inputs: [
            { id: "friction_coeff", label: { zh: "æ‘©æ“¦ç³»æ•° (Î¼)", en: "Friction Coefficient (Î¼)" }, units: [""], defaultUnit: "" },
            { id: "normal_force", label: { zh: "æ³•å‘åŠ› (N)", en: "Normal Force (N)" }, units: ["N", "lbf"], defaultUnit: "N" },
            { id: "frictional_force", label: { zh: "æ‘©æ“¦åŠ› (F_friction)", en: "Frictional Force (F_friction)" }, units: ["N", "lbf"], defaultUnit: "N" }
          ],
          calculate: (inputs) => {
            const mu = inputs.friction_coeff ? parseFloat(inputs.friction_coeff.value) : null;
            const N = inputs.normal_force ? parseFloat(inputs.normal_force.value) : null;
            const F_friction = inputs.frictional_force ? parseFloat(inputs.frictional_force.value) : null;
            
            if (mu !== null && N !== null && F_friction === null) {
              return { result: mu * N, unit: "N", formula: `F_friction = Î¼ Ã— N = ${mu} Ã— ${N}` };
            }
            return null;
          }
        },
        kinetic: {
          name: { zh: "åŠ¨èƒ½", en: "Kinetic Energy" },
          equation: { zh: "KE = Â½ Ã— m Ã— vÂ²", en: "KE = Â½ Ã— m Ã— vÂ²" },
          latex: "KE = \\frac{1}{2} m v^2",
          inputs: [
            { id: "mass", label: { zh: "è´¨é‡ (m)", en: "Mass (m)" }, units: ["kg", "g", "lb"], defaultUnit: "kg" },
            { id: "velocity", label: { zh: "é€Ÿåº¦ (v)", en: "Velocity (v)" }, units: ["m/s", "km/h", "mph"], defaultUnit: "m/s" },
            { id: "kinetic_energy", label: { zh: "åŠ¨èƒ½ (KE)", en: "Kinetic Energy (KE)" }, units: ["J", "kJ"], defaultUnit: "J" }
          ],
          calculate: (inputs) => {
            const m = inputs.mass ? parseFloat(inputs.mass.value) : null;
            const v = inputs.velocity ? parseFloat(inputs.velocity.value) : null;
            const KE = inputs.kinetic_energy ? parseFloat(inputs.kinetic_energy.value) : null;
            
            if (m !== null && v !== null && KE === null) {
              return { result: 0.5 * m * v * v, unit: "J", formula: `KE = Â½ Ã— m Ã— vÂ² = 0.5 Ã— ${m} Ã— ${v}Â²` };
            }
            return null;
          }
        }
      };

      // å…¨å±€å˜é‡
      let lang = 'zh';
      let currentTheme = 'light';
      let currentFormula = 'newton_second';
      let physicsChart = null;

      // DOMå…ƒç´ 
      const langSwitch = document.getElementById('lang-switch');
      const themeToggle = document.getElementById('theme-toggle');
      const themeIcon = document.getElementById('theme-icon');
      const formulaDisplay = document.getElementById('formulaDisplay');
      const resultBox = document.getElementById('resultBox');
      const inputFields = document.getElementById('inputFields');
      const calcBtn = document.getElementById('calcBtn');
      const clearBtn = document.getElementById('clearBtn');
      const formulaButtons = document.querySelectorAll('.formula-btn');

      // åˆå§‹åŒ–å‡½æ•°
      function init() {
        // è‡ªåŠ¨æ£€æµ‹ç”¨æˆ·è¯­è¨€
        const userLang = navigator.language || navigator.userLanguage || '';
        if (userLang.toLowerCase().startsWith('en')) lang = 'en';
        
        // å¦‚æœä¹‹å‰ç”¨æˆ·æ‰‹åŠ¨é€‰æ‹©è¿‡è¯­è¨€ï¼Œä¼˜å…ˆä½¿ç”¨å­˜å‚¨çš„
        if (localStorage.getItem('site-lang')) {
          lang = localStorage.getItem('site-lang');
        }
        
        // æ£€æµ‹ä¸»é¢˜åå¥½
        if (localStorage.getItem('site-theme')) {
          currentTheme = localStorage.getItem('site-theme');
        } else if (window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches) {
          currentTheme = 'dark';
        }
        
        applyTheme();
        setLanguage(lang);
        setupFormula(currentFormula);
        setupEventListeners();
        initChart();
      }

      // è®¾ç½®äº‹ä»¶ç›‘å¬å™¨
      function setupEventListeners() {
        langSwitch.addEventListener('click', () => {
          setLanguage(lang === 'zh' ? 'en' : 'zh');
        });
        
        themeToggle.addEventListener('click', toggleTheme);
        
        calcBtn.addEventListener('click', calculateFormula);
        
        clearBtn.addEventListener('click', () => {
          clearInputs();
          clearResult();
          updateChart([]);
        });
        
        formulaButtons.forEach(button => {
          button.addEventListener('click', () => {
            // ç§»é™¤æ‰€æœ‰æŒ‰é’®çš„activeç±»
            formulaButtons.forEach(btn => btn.classList.remove('active'));
            // ä¸ºå½“å‰æŒ‰é’®æ·»åŠ activeç±»
            button.classList.add('active');
            // è®¾ç½®å½“å‰å…¬å¼
            currentFormula = button.dataset.formula;
            setupFormula(currentFormula);
            clearResult();
            updateChart([]);
          });
        });
      }

      // è®¾ç½®è¯­è¨€
      function setLanguage(lng) {
        lang = lng;
        localStorage.setItem('site-lang', lng);
        document.documentElement.lang = lng === 'zh' ? 'zh-CN' : 'en-US';

        // æ›´æ–°æ‰€æœ‰å¸¦ data-i18n çš„å…ƒç´ 
        document.querySelectorAll('[data-i18n]').forEach(el => {
          const key = el.getAttribute('data-i18n');
          if (!translations[lng][key]) return;

          if (el.tagName === 'INPUT' || el.tagName === 'TEXTAREA') {
            el.placeholder = translations[lng][key];
          } else if (el.tagName === 'BUTTON') {
            el.textContent = translations[lng][key];
          } else {
            el.textContent = translations[lng][key];
          }
        });

        // æ›´æ–°è¯­è¨€åˆ‡æ¢æŒ‰é’®æ–‡å­—
        langSwitch.querySelector('span').textContent = translations[lng].language;
        
        // æ›´æ–°æ ‡é¢˜
        document.title = translations[lng].title;
        
        // é‡æ–°è®¾ç½®å½“å‰å…¬å¼ä»¥æ›´æ–°æ ‡ç­¾
        setupFormula(currentFormula);
      }

      // åˆ‡æ¢ä¸»é¢˜
      function toggleTheme() {
        currentTheme = currentTheme === 'light' ? 'dark' : 'light';
        applyTheme();
        localStorage.setItem('site-theme', currentTheme);
      }

      // åº”ç”¨ä¸»é¢˜
      function applyTheme() {
        document.body.setAttribute('data-theme', currentTheme);
        themeIcon.textContent = currentTheme === 'light' ? 'ğŸŒ™' : 'â˜€ï¸';
        themeToggle.querySelector('span:last-child').textContent = 
          translations[lang][currentTheme === 'light' ? 'dark_mode' : 'dark_mode'];
      }

      // è®¾ç½®å…¬å¼è¾“å…¥å­—æ®µ
      function setupFormula(formulaKey) {
        const formula = formulas[formulaKey];
        if (!formula) return;
        
        // æ¸…ç©ºè¾“å…¥åŒºåŸŸ
        inputFields.innerHTML = '';
        
        // æ¸²æŸ“è¾“å…¥å­—æ®µ
        formula.inputs.forEach(input => {
          const container = document.createElement('div');
          container.className = 'input-container';
          
          const label = document.createElement('label');
          label.htmlFor = input.id;
          label.textContent = translations[lang][input.label[lang]] || input.label[lang];
          
          const inputEl = document.createElement('input');
          inputEl.type = 'number';
          inputEl.id = input.id;
          inputEl.step = 'any';
          inputEl.autocomplete = 'off';
          inputEl.placeholder = translations[lang][input.label[lang]] || input.label[lang];
          
          const unitGroup = document.createElement('div');
          unitGroup.className = 'unit-group';
          
          if (input.units && input.units.length > 0) {
            const unitSelect = document.createElement('select');
            unitSelect.id = `${input.id}_unit`;
            
            input.units.forEach(unit => {
              const option = document.createElement('option');
              option.value = unit;
              option.textContent = translations[lang][`unit_${unit}`] || unit;
              if (unit === input.defaultUnit) option.selected = true;
              unitSelect.appendChild(option);
            });
            
            unitGroup.appendChild(unitSelect);
          }
          
          container.appendChild(label);
          container.appendChild(inputEl);
          container.appendChild(unitGroup);
          inputFields.appendChild(container);
        });
        
        // æ›´æ–°å…¬å¼æ˜¾ç¤º
        renderFormulaDisplay(formula.latex);
      }

      // æ¸²æŸ“å…¬å¼æ˜¾ç¤º
      function renderFormulaDisplay(latex) {
        formulaDisplay.innerHTML = '';
        katex.render(latex, formulaDisplay, {
          throwOnError: false,
          displayMode: true
        });
      }

      // è®¡ç®—å…¬å¼
      function calculateFormula() {
        const formula = formulas[currentFormula];
        if (!formula) return;
        
        // æ”¶é›†è¾“å…¥å€¼
        const inputs = {};
        let inputCount = 0;
        
        formula.inputs.forEach(input => {
          const inputEl = document.getElementById(input.id);
          const unitEl = document.getElementById(`${input.id}_unit`);
          
          if (inputEl && inputEl.value.trim() !== '') {
            inputs[input.id] = {
              value: inputEl.value,
              unit: unitEl ? unitEl.value : null
            };
            inputCount++;
          }
        });
        
        // æ£€æŸ¥æ˜¯å¦æœ‰è¶³å¤Ÿè¾“å…¥
        if (inputCount < 2) {
          resultBox.textContent = translations[lang].err_two_values;
          return;
        }
        
        // è®¡ç®—ç»“æœ
        const result = formula.calculate(inputs);
        if (result) {
          resultBox.textContent = `${translations[lang].result}: ${result.result.toFixed(4)} ${translations[lang][`unit_${result.unit}`] || result.unit}\n${result.formula}`;
          
          // ç”Ÿæˆå›¾è¡¨æ•°æ®
          const data = generateChartData(formula, inputs, result);
          updateChart(data);
        } else {
          resultBox.textContent = translations[lang].err_invalid;
        }
      }

      // ç”Ÿæˆå›¾è¡¨æ•°æ®
      function generateChartData(formula, inputs, result) {
        if (formula === formulas.newton_second) {
          const data = [];
          const m = inputs.mass ? parseFloat(inputs.mass.value) : result.result;
          
          for (let a = 0; a <= 20; a += 1) {
            data.push({ x: a, y: m * a });
          }
          
          return {
            datasets: [{
              label: translations[lang].result_force,
              data: data,
              borderColor: '#4db5bd',
              backgroundColor: 'rgba(77, 181, 189, 0.1)',
              tension: 0.4,
              fill: true
            }]
          };
        } else if (formula === formulas.final_velocity) {
          const data = [];
          const u = inputs.initial_velocity ? parseFloat(inputs.initial_velocity.value) : 5;
          const a = inputs.acceleration ? parseFloat(inputs.acceleration.value) : 2;
          
          for (let t = 0; t <= 10; t += 0.5) {
            data.push({ x: t, y: u + a * t });
          }
          
          return {
            datasets: [{
              label: translations[lang].final_velocity_v,
              data: data,
              borderColor: '#e76f51',
              backgroundColor: 'rgba(231, 111, 81, 0.1)',
              tension: 0.4,
              fill: true
            }]
          };
        }
        
        return [];
      }

      // åˆå§‹åŒ–å›¾è¡¨
      function initChart() {
        const ctx = document.getElementById('physicsChart').getContext('2d');
        physicsChart = new Chart(ctx, {
          type: 'line',
          data: { datasets: [] },
          options: {
            responsive: true,
            maintainAspectRatio: false,
            plugins: {
              title: {
                display: true,
                text: translations[lang].chart_title || 'Physics Visualization',
                color: 'var(--text-color)',
                font: { size: 16 }
              },
              legend: {
                labels: { color: 'var(--text-color)' }
              }
            },
            scales: {
              x: {
                type: 'linear',
                position: 'bottom',
                title: {
                  display: true,
                  text: translations[lang].x_axis || 'X Axis',
                  color: 'var(--text-color)'
                },
                grid: { color: 'rgba(200, 200, 200, 0.1)' },
                ticks: { color: 'var(--text-color)' }
              },
              y: {
                title: {
                  display: true,
                  text: translations[lang].y_axis || 'Y Axis',
                  color: 'var(--text-color)'
                },
                grid: { color: 'rgba(200, 200, 200, 0.1)' },
                ticks: { color: 'var(--text-color)' }
              }
            }
          }
        });
      }

      // æ›´æ–°å›¾è¡¨
      function updateChart(data) {
        if (!physicsChart) return;
        
        physicsChart.data = data;
        physicsChart.update();
      }

      // æ¸…ç©ºè¾“å…¥
      function clearInputs() {
        const inputs = document.querySelectorAll('input[type="number"]');
        inputs.forEach(input => input.value = '');
      }

      // æ¸…ç©ºç»“æœ
      function clearResult() {
        resultBox.textContent = '';
      }

      // é¡µé¢åŠ è½½æ—¶åˆå§‹åŒ–
      window.addEventListener('DOMContentLoaded', init);
    })();
  </script>
</body>
</html>