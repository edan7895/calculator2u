<!DOCTYPE html>
<html lang="auto">
<head>
<meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title data-i18n="title">Material Strength Calculator | ææ–™å¼ºåº¦è®¡ç®—å™¨</title>
    <meta name="description" content="Advanced material strength calculator for computing stress, strain, Young's modulus, shear stress, factor of safety, and more. Ideal for engineers, material scientists, and students in mechanical and civil engineering." />
    <meta name="keywords" content="material strength, stress calculator, strain analysis, Young's modulus, factor of safety, engineering calculator, shear stress, material science, mechanical engineering, civil engineering" />
    <meta name="author" content="Calculator2U" />
    <!-- ä¸­æ–‡ Meta Tags -->
    <meta name="description" lang="zh" content="é«˜çº§ææ–™å¼ºåº¦è®¡ç®—å™¨ï¼Œè®¡ç®—åº”åŠ›ã€åº”å˜ã€æ¨æ°æ¨¡é‡ã€å‰ªåˆ‡åº”åŠ›ã€å®‰å…¨ç³»æ•°ç­‰å·¥ç¨‹å‚æ•°ã€‚é€‚ç”¨äºæœºæ¢°å’ŒåœŸæœ¨å·¥ç¨‹é¢†åŸŸçš„å·¥ç¨‹å¸ˆã€ææ–™ç§‘å­¦å®¶å’Œå­¦ç”Ÿã€‚" />
    <meta name="keywords" lang="zh" content="ææ–™å¼ºåº¦, åº”åŠ›è®¡ç®—, åº”å˜åˆ†æ, æ¨æ°æ¨¡é‡, å®‰å…¨ç³»æ•°, å·¥ç¨‹è®¡ç®—å™¨, å‰ªåˆ‡åº”åŠ›, ææ–™ç§‘å­¦, æœºæ¢°å·¥ç¨‹, åœŸæœ¨å·¥ç¨‹" />
    <!-- Open Graph æ ‡ç­¾ -->
    <meta property="og:title" content="ææ–™å¼ºåº¦è®¡ç®—å™¨ | Material Strength Calculator" />
    <meta property="og:description" content="é«˜çº§ææ–™å¼ºåº¦è®¡ç®—å™¨ï¼Œè®¡ç®—åº”åŠ›ã€åº”å˜ã€æ¨æ°æ¨¡é‡ã€å‰ªåˆ‡åº”åŠ›ã€å®‰å…¨ç³»æ•°ç­‰å·¥ç¨‹å‚æ•°ã€‚é€‚ç”¨äºæœºæ¢°å’ŒåœŸæœ¨å·¥ç¨‹é¢†åŸŸçš„å·¥ç¨‹å¸ˆã€ææ–™ç§‘å­¦å®¶å’Œå­¦ç”Ÿã€‚" />
    <meta property="og:type" content="website" />
    <meta property="og:image" content="https://www.calculator2u.com/assets/images/material-strength-calculator.jpg" />
    <meta property="og:locale" content="zh_CN" />
    <meta property="og:site_name" content="Calculator2U" />
    <!-- æ·»åŠ æ›´å¤šè¯­è¨€ç‰ˆæœ¬é“¾æ¥ -->
    <link rel="alternate" hreflang="en" href="https://Calculator2U/en/material-strength-calculator" />
    <link rel="alternate" hreflang="zh" href="https://Calculator2U/zh/material-strength-calculator" />

<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-RLH4FLZBZF"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-RLH4FLZBZF');
</script>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <style>
    :root {
      --primary-color: #006d77;
      --secondary-color: #003f5c;
      --text-color: #333;
      --bg-color: #f9f9f9;
      --card-bg: #fff;
      --border-color: #ddd;
      --result-bg: #e9f0fb;
      --shadow: 0 3px 12px rgba(0, 0, 0, 0.1);
      --nav-bg: #006d77;
      --footer-bg: #f0f0f0;
    }

    [data-theme="dark"] {
      --primary-color: #4db5bd;
      --secondary-color: #2c698d;
      --text-color: #e6e6e6;
      --bg-color: #1a1a2e;
      --card-bg: #16213e;
      --border-color: #2a2a4a;
      --result-bg: #1f4068;
      --shadow: 0 3px 12px rgba(0, 0, 0, 0.3);
      --nav-bg: #0f3460;
      --footer-bg: #0f3460;
    }

    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      margin: 0; 
      background: var(--bg-color); 
      color: var(--text-color);
      display: flex; 
      flex-direction: column; 
      min-height: 100vh;
      transition: background 0.3s, color 0.3s;
    }
    
    .navbar {
      background-color: var(--primary-color);
      padding: 1rem 2rem;
      display: flex;
      justify-content: space-between;
      align-items: center;
      flex-wrap: wrap;
    }
    
    .navbar .logo {
      color: #fff;
      font-size: 1.5rem;
      font-weight: bold;
      text-decoration: none;
    }
    
    .nav-links {
      list-style: none;
      display: flex;
      gap: 1.2rem;
      margin: 0;
      padding-left: 0;
      align-items: center;
    }
    
    .nav-links a {
      color: #fff;
      text-decoration: none;
      font-weight: 500;
    }
    
    .control-buttons {
      display: flex;
      gap: 0.8rem;
    }
    
    .theme-switch, .lang-switch {
      background: rgba(255,255,255,0.15);
      border: 1.5px solid rgba(255,255,255,0.5);
      color: #fff;
      padding: 0.3rem 0.8rem;
      border-radius: 4px;
      cursor: pointer;
      font-weight: 600;
      display: flex;
      align-items: center;
      gap: 0.3rem;
    }
    
    main.container {
      max-width: 800px;
      margin: 2rem auto 3rem auto;
      background: var(--container-bg);
      padding: 1.5rem 2rem;
      border-radius: 10px;
      box-shadow: 0 3px 12px rgba(0,0,0,0.1);
      flex-grow: 1;
      transition: background 0.3s, box-shadow 0.3s;
    }
    
    h1 {
      text-align: center;
      color: var(--secondary-color);
      font-size: 2rem;
      margin-bottom: 0.5rem;
    }
    
    p.desc {
      text-align: center;
      font-size: 1rem;
      color: var(--text-color);
      margin-bottom: 2rem;
      opacity: 0.8;
    }
    
    .formula-selector {
      margin-bottom: 1.5rem;
      display: flex;
      flex-direction: column;
      gap: 0.5rem;
    }
    
    .formula-selector label {
      font-weight: 600;
      color: var(--secondary-color);
    }
    
    select {
      padding: 0.6rem;
      font-size: 1rem;
      border-radius: 5px;
      border: 1.5px solid var(--border-color);
      background: var(--container-bg);
      color: var(--text-color);
      width: 100%;
    }
    
    form.calc-form {
      display: flex;
      flex-direction: column;
      gap: 1rem;
    }
    
    .input-group {
      display: flex;
      gap: 0.5rem;
    }
    
    .input-group input {
      flex: 1;
    }
    
    .input-group select {
      width: auto;
      min-width: 100px;
    }
    
    label {
      font-weight: 600;
      margin-bottom: 0.3rem;
      display: block;
      color: var(--secondary-color);
    }
    
    input[type="number"] {
      padding: 0.6rem;
      font-size: 1rem;
      border-radius: 5px;
      border: 1.5px solid var(--border-color);
      background: var(--container-bg);
      color: var(--text-color);
      width: 100%;
      box-sizing: border-box;
    }
    
    button {
      background-color: var(--button-bg);
      color: white;
      font-weight: 700;
      border: none;
      padding: 0.7rem 1rem;
      border-radius: 6px;
      cursor: pointer;
      font-size: 1rem;
      transition: background-color 0.3s ease;
      margin-top: 0.5rem;
    }
    
    button:hover {
      background-color: var(--button-hover);
    }
    
    .result-container {
      margin-top: 1.5rem;
    }
    
    .result-box {
      background: var(--result-bg);
      padding: 1rem;
      border-radius: 8px;
      font-family: 'Courier New', monospace;
      font-size: 1.1rem;
      color: var(--text-color);
      white-space: pre-wrap;
      word-break: break-word;
      min-height: 3em;
      margin-bottom: 1.5rem;
    }
    
    .formula-display {
      font-family: 'Cambria', serif;
      font-size: 1.2rem;
      text-align: center;
      margin: 1rem 0;
      padding: 0.5rem;
      background: rgba(0,0,0,0.05);
      border-radius: 5px;
      border-left: 3px solid var(--secondary-color);
    }
    
    .chart-container {
      height: 300px;
      margin-top: 1.5rem;
    }
    
    footer {
      text-align: center;
      padding: 1.5rem 1rem;
      background: var(--footer-bg);
      font-size: 0.9rem;
      color: var(--text-color);
      user-select: none;
      transition: background 0.3s;
    }
    
    footer a {
      color: var(--secondary-color);
      text-decoration: none;
    }
    
    footer a:hover {
      text-decoration: underline;
    }
    
    @media (max-width: 768px) {
      main.container {
        margin: 1rem;
        padding: 1rem;
      }
      
      h1 {
        font-size: 1.6rem;
      }
      
      .navbar {
        padding: 1rem;
      }
      
      .nav-links {
        display: none;
      }
      
      .input-group {
        flex-direction: column;
      }
      
      .input-group select {
        width: 100%;
      }
    }
    
    @media (max-width: 480px) {
      .control-buttons {
        flex-direction: column;
        gap: 0.5rem;
      }
    }
    
    /* å¤œé—´æ¨¡å¼åª’ä½“æŸ¥è¯¢ */
    @media (prefers-color-scheme: dark) {
      :root {
        --bg-color: #121212;
        --text-color: #e0e0e0;
        --container-bg: #1e1e1e;
        --primary-color: #00838f;
        --secondary-color: #005b6e;
        --accent-color: #0077c2;
        --result-bg: #2d3748;
        --border-color: #444;
        --button-bg: #005b6e;
        --button-hover: #0077c2;
        --footer-bg: #1a1a1a;
      }
    }
  </style>
</head>
<body>
<header>

    <nav class="navbar">
      <a href="/index.html" class="logo">Calculator2U</a>
      <ul class="nav-links">
        <li><a href="/pages/health/index.html" data-i18n="nav_health">å¥åº·ä¸èº«ä½“</a></li>
        <li><a href="/pages/finance/index.html" data-i18n="nav_finance">è´¢åŠ¡ä¸æŠ•èµ„</a></li>
        <li><a href="/pages/education/index.html" data-i18n="nav_education">æ•™è‚²ä¸å­¦ä¹ </a></li>
        <li><a href="/pages/engineering/index.html" data-i18n="nav_engineering">å·¥ç¨‹ä¸ç§‘å­¦</a></li>
        <li><a href="/pages/daily-life/index.html" data-i18n="nav_daily_life">æ—¥å¸¸ç”Ÿæ´»</a></li>
        <li><a href="/about.html" data-i18n="nav_about_us">å…³äºæˆ‘ä»¬</a></li>
      </ul>
      <div class="control-buttons">
        <button class="theme-switch" id="theme-switch">
          <span id="theme-icon">ğŸŒ™</span>
          <span id="theme-text" data-i18n="dark_mode">å¤œé—´æ¨¡å¼</span>
        </button>
        <button class="lang-switch" id="lang-switch">
          <span id="lang-text">EN</span>
        </button>
      </div>
    </nav>
</header>

  <main class="container">
    <h1 data-i18n="title">ææ–™å¼ºåº¦è®¡ç®—å™¨</h1>
    <p class="desc" data-i18n="desc">è®¡ç®—åº”åŠ›ã€åº”å˜ã€æ¨æ°æ¨¡é‡ã€å‰ªåˆ‡åº”åŠ›å’Œå®‰å…¨ç³»æ•°</p>
    
    <div class="formula-selector">
      <label for="formula-select" data-i18n="select_formula">é€‰æ‹©è®¡ç®—å…¬å¼:</label>
      <select id="formula-select">
        <option value="stress" data-i18n="formula_stress">åº”åŠ› (Ïƒ = F/A)</option>
        <option value="strain" data-i18n="formula_strain">åº”å˜ (Îµ = Î”L/Lâ‚€)</option>
        <option value="youngs" data-i18n="formula_youngs">æ¨æ°æ¨¡é‡ (E = Ïƒ/Îµ)</option>
        <option value="shear" data-i18n="formula_shear">å‰ªåˆ‡åº”åŠ› (Ï„ = F/A)</option>
        <option value="safety" data-i18n="formula_safety">å®‰å…¨ç³»æ•° (FS = Ïƒ_ultimate/Ïƒ_allowable)</option>
      </select>
    </div>
    
    <form class="calc-form" id="calcForm">
      <!-- åŠ¨æ€ç”Ÿæˆçš„è¾“å…¥å­—æ®µ -->
    </form>


    <div class="result-container">
      <div class="formula-display" id="formulaDisplay"></div>
      <div class="result-box" id="resultBox" aria-live="polite" aria-atomic="true"></div>
      <div class="chart-container">
        <canvas id="resultChart"></canvas>
      </div>
    </div>
  </main>

  <footer>

    <p>&copy; 2025 Calculator2U. <span data-i18n="footer_rights">ä¿ç•™æ‰€æœ‰æƒåˆ©ã€‚</span> | 
      <a href="/privacy.html" data-i18n="footer_privacy_policy">éšç§æ”¿ç­–</a> | 
      <a href="/terms.html" data-i18n="footer_terms_of_service">ä½¿ç”¨æ¡æ¬¾</a></p>
  </footer>

  <script>
    (() => {
      // æ‰©å±•ç¿»è¯‘å†…å®¹
      const translations = {
        zh: {
          title: "ææ–™å¼ºåº¦è®¡ç®—å™¨",
          desc: "è®¡ç®—åº”åŠ›ã€åº”å˜ã€æ¨æ°æ¨¡é‡ã€å‰ªåˆ‡åº”åŠ›å’Œå®‰å…¨ç³»æ•°",
          nav_health: "å¥åº·ä¸èº«ä½“",
          nav_finance: "è´¢åŠ¡ä¸æŠ•èµ„",
          nav_education: "æ•™è‚²ä¸å­¦ä¹ ",
          nav_engineering: "å·¥ç¨‹ä¸ç§‘å­¦",
          nav_daily_life: "æ—¥å¸¸ç”Ÿæ´»",
          nav_about_us: "å…³äºæˆ‘ä»¬",
          select_formula: "é€‰æ‹©è®¡ç®—å…¬å¼:",
          formula_stress: "åº”åŠ› (Ïƒ = F/A)",
          formula_strain: "åº”å˜ (Îµ = Î”L/Lâ‚€)",
          formula_youngs: "æ¨æ°æ¨¡é‡ (E = Ïƒ/Îµ)",
          formula_shear: "å‰ªåˆ‡åº”åŠ› (Ï„ = F/A)",
          formula_safety: "å®‰å…¨ç³»æ•° (FS = Ïƒ_ultimate/Ïƒ_allowable)",
          label_force: "åŠ› (F)",
          label_area: "æˆªé¢ç§¯ (A)",
          label_stress: "åº”åŠ› (Ïƒ)",
          label_length: "åŸå§‹é•¿åº¦ (Lâ‚€)",
          label_dlength: "é•¿åº¦å˜åŒ– (Î”L)",
          label_ustress: "æé™åº”åŠ›",
          label_astress: "è®¸ç”¨åº”åŠ›",
          calc_btn: "è®¡ç®—",
          clear_btn: "æ¸…é™¤",
          dark_mode: "å¤œé—´æ¨¡å¼",
          light_mode: "æ—¥é—´æ¨¡å¼",
          footer_privacy_policy: "éšç§æ”¿ç­–",
          footer_terms_of_service: "ä½¿ç”¨æ¡æ¬¾",
          footer_rights: "ä¿ç•™æ‰€æœ‰æƒåˆ©ã€‚",
          err_two_values: "è¯·è‡³å°‘è¾“å…¥ä¸¤ä¸ªæ•°å€¼ã€‚",
          err_invalid: "è¾“å…¥çš„å€¼å¿…é¡»æ˜¯éè´Ÿæ•°å­—ã€‚",
          err_zero: "è¯¥å€¼ä¸èƒ½ä¸ºé›¶ã€‚",
          result_force: "åŠ›",
          result_area: "æˆªé¢ç§¯",
          result_stress: "åº”åŠ›",
          result_strain: "åº”å˜",
          result_youngs: "æ¨æ°æ¨¡é‡",
          result_safety: "å®‰å…¨ç³»æ•°",
          unit_pa: "å¸•æ–¯å¡ (Pa)",
          unit_mpa: "å…†å¸• (MPa)",
          unit_gpa: "å‰å¸• (GPa)",
          unit_n: "ç‰›é¡¿ (N)",
          unit_kn: "åƒç‰› (kN)",
          unit_mm: "æ¯«ç±³ (mm)",
          unit_m: "ç±³ (m)",
          unit_m2: "å¹³æ–¹ç±³ (mÂ²)",
          unit_mm2: "å¹³æ–¹æ¯«ç±³ (mmÂ²)"
        },
        en: {
          title: "Material Strength Calculator",
          desc: "Calculate stress, strain, Young's modulus, shear stress and safety factor",
          nav_health: "Health & Body",
          nav_finance: "Finance & Investment",
          nav_education: "Education & Learning",
          nav_engineering: "Engineering & Science",
          nav_daily_life: "Daily Life",
          nav_about_us: "About Us",
          select_formula: "Select Formula:",
          formula_stress: "Tensile Stress (Ïƒ = F/A)",
          formula_strain: "Strain (Îµ = Î”L/Lâ‚€)",
          formula_youngs: "Young's Modulus (E = Ïƒ/Îµ)",
          formula_shear: "Shear Stress (Ï„ = F/A)",
          formula_safety: "Factor of Safety (FS = Ïƒ_ultimate/Ïƒ_allowable)",
          label_force: "Force (F)",
          label_area: "Area (A)",
          label_stress: "Stress (Ïƒ)",
          label_length: "Original Length (Lâ‚€)",
          label_dlength: "Length Change (Î”L)",
          label_ustress: "Ultimate Stress",
          label_astress: "Allowable Stress",
          calc_btn: "Calculate",
          clear_btn: "Clear",
          dark_mode: "Dark Mode",
          light_mode: "Light Mode",
          footer_privacy_policy: "Privacy Policy",
          footer_terms_of_service: "Terms of Service",
          footer_rights: "All rights reserved.",
          err_two_values: "Please enter at least two values.",
          err_invalid: "Values must be non-negative numbers.",
          err_zero: "This value cannot be zero.",
          result_force: "Force",
          result_area: "Area",
          result_stress: "Stress",
          result_strain: "Strain",
          result_youngs: "Young's Modulus",
          result_safety: "Safety Factor",
          unit_pa: "Pascal (Pa)",
          unit_mpa: "Megapascal (MPa)",
          unit_gpa: "Gigapascal (GPa)",
          unit_n: "Newton (N)",
          unit_kn: "Kilonewton (kN)",
          unit_mm: "Millimeter (mm)",
          unit_m: "Meter (m)",
          unit_m2: "Square meter (mÂ²)",
          unit_mm2: "Square millimeter (mmÂ²)"
        }
      };

      // å•ä½è½¬æ¢å› å­
      const unitConversions = {
        force: {
          'N': 1,
          'kN': 1000
        },
        area: {
          'mÂ²': 1,
          'mmÂ²': 0.000001
        },
        length: {
          'm': 1,
          'mm': 0.001
        },
        stress: {
          'Pa': 1,
          'MPa': 1000000,
          'GPa': 1000000000
        }
      };

      // å…¬å¼å®šä¹‰
      const formulas = {
        stress: {
          name: 'Ïƒ = F/A',
          inputs: [
            { id: 'force', label: 'label_force', units: ['N', 'kN'] },
            { id: 'area', label: 'label_area', units: ['mÂ²', 'mmÂ²'] },
            { id: 'stress', label: 'label_stress', units: ['Pa', 'MPa', 'GPa'] }
          ],
          calculate: (values) => {
            const F = values.force.value * unitConversions.force[values.force.unit];
            const A = values.area.value * unitConversions.area[values.area.unit];
            
            if (values.stress.value === '') {
              if (A === 0) throw new Error('err_zero');
              return { stress: F / A };
            } else if (values.area.value === '') {
              const stress = values.stress.value * unitConversions.stress[values.stress.unit];
              if (stress === 0) throw new Error('err_zero');
              return { area: F / stress };
            } else if (values.force.value === '') {
              const stress = values.stress.value * unitConversions.stress[values.stress.unit];
              return { force: stress * A };
            }
          },
          display: (lang, values, result) => {
            const unit = values.stress?.unit || 'Pa';
            const stressValue = result.stress ? result.stress / unitConversions.stress[unit] : 
                              values.stress.value;
            
            if (result.stress) {
              return `${translations[lang].result_stress}: ${stressValue.toFixed(4)} ${unit}\n${translations[lang].formula_stress}: Ïƒ = F / A`;
            } else if (result.area) {
              return `${translations[lang].result_area}: ${result.area.toFixed(8)} mÂ²\n${translations[lang].formula_stress}: A = F / Ïƒ`;
            } else if (result.force) {
              return `${translations[lang].result_force}: ${result.force.toFixed(4)} N\n${translations[lang].formula_stress}: F = Ïƒ Ã— A`;
            }
          }
        },
        strain: {
          name: 'Îµ = Î”L/Lâ‚€',
          inputs: [
            { id: 'length', label: 'label_length', units: ['m', 'mm'] },
            { id: 'dlength', label: 'label_dlength', units: ['m', 'mm'] },
            { id: 'strain', label: 'label_strain', units: [''] }
          ],
          calculate: (values) => {
            const L0 = values.length.value * unitConversions.length[values.length.unit];
            const dL = values.dlength.value * unitConversions.length[values.dlength.unit];
            
            if (values.strain.value === '') {
              if (L0 === 0) throw new Error('err_zero');
              return { strain: dL / L0 };
            } else if (values.dlength.value === '') {
              return { dlength: values.strain.value * L0 };
            } else if (values.length.value === '') {
              if (values.strain.value === 0) throw new Error('err_zero');
              return { length: dL / values.strain.value };
            }
          },
          display: (lang, values, result) => {
            if (result.strain) {
              return `${translations[lang].result_strain}: ${result.strain.toFixed(6)}\n${translations[lang].formula_strain}: Îµ = Î”L / Lâ‚€`;
            } else if (result.dlength) {
              return `${translations[lang].label_dlength}: ${result.dlength.toFixed(6)} m\n${translations[lang].formula_strain}: Î”L = Îµ Ã— Lâ‚€`;
            } else if (result.length) {
              return `${translations[lang].label_length}: ${result.length.toFixed(6)} m\n${translations[lang].formula_strain}: Lâ‚€ = Î”L / Îµ`;
            }
          }
        },
        youngs: {
          name: 'E = Ïƒ/Îµ',
          inputs: [
            { id: 'stress', label: 'label_stress', units: ['Pa', 'MPa', 'GPa'] },
            { id: 'strain', label: 'label_strain', units: [''] },
            { id: 'youngs', label: 'label_youngs', units: ['Pa', 'MPa', 'GPa'] }
          ],
          calculate: (values) => {
            const stress = values.stress.value * unitConversions.stress[values.stress.unit];
            
            if (values.youngs.value === '') {
              if (values.strain.value === 0) throw new Error('err_zero');
              return { youngs: stress / values.strain.value };
            } else if (values.stress.value === '') {
              const youngs = values.youngs.value * unitConversions.stress[values.youngs.unit];
              return { stress: youngs * values.strain.value };
            } else if (values.strain.value === '') {
              const youngs = values.youngs.value * unitConversions.stress[values.youngs.unit];
              if (stress === 0) throw new Error('err_zero');
              return { strain: stress / youngs };
            }
          },
          display: (lang, values, result) => {
            const unit = values.youngs?.unit || 'Pa';
            const youngsValue = result.youngs ? result.youngs / unitConversions.stress[unit] : 
                              values.youngs.value;
            
            if (result.youngs) {
              return `${translations[lang].result_youngs}: ${youngsValue.toFixed(2)} ${unit}\n${translations[lang].formula_youngs}: E = Ïƒ / Îµ`;
            } else if (result.stress) {
              return `${translations[lang].result_stress}: ${(result.stress / unitConversions.stress[values.stress.unit]).toFixed(4)} ${values.stress.unit}\n${translations[lang].formula_youngs}: Ïƒ = E Ã— Îµ`;
            } else if (result.strain) {
              return `${translations[lang].result_strain}: ${result.strain.toFixed(6)}\n${translations[lang].formula_youngs}: Îµ = Ïƒ / E`;
            }
          }
        },
        shear: {
          name: 'Ï„ = F/A',
          inputs: [
            { id: 'force', label: 'label_force', units: ['N', 'kN'] },
            { id: 'area', label: 'label_area', units: ['mÂ²', 'mmÂ²'] },
            { id: 'shear', label: 'label_stress', units: ['Pa', 'MPa', 'GPa'] }
          ],
          calculate: (values) => {
            const F = values.force.value * unitConversions.force[values.force.unit];
            const A = values.area.value * unitConversions.area[values.area.unit];
            
            if (values.shear.value === '') {
              if (A === 0) throw new Error('err_zero');
              return { shear: F / A };
            } else if (values.area.value === '') {
              const shear = values.shear.value * unitConversions.stress[values.shear.unit];
              if (shear === 0) throw new Error('err_zero');
              return { area: F / shear };
            } else if (values.force.value === '') {
              const shear = values.shear.value * unitConversions.stress[values.shear.unit];
              return { force: shear * A };
            }
          },
          display: (lang, values, result) => {
            const unit = values.shear?.unit || 'Pa';
            const shearValue = result.shear ? result.shear / unitConversions.stress[unit] : 
                              values.shear.value;
            
            if (result.shear) {
              return `${translations[lang].result_stress}: ${shearValue.toFixed(4)} ${unit}\n${translations[lang].formula_shear}: Ï„ = F / A`;
            } else if (result.area) {
              return `${translations[lang].result_area}: ${result.area.toFixed(8)} mÂ²\n${translations[lang].formula_shear}: A = F / Ï„`;
            } else if (result.force) {
              return `${translations[lang].result_force}: ${result.force.toFixed(4)} N\n${translations[lang].formula_shear}: F = Ï„ Ã— A`;
            }
          }
        },
        safety: {
          name: 'FS = Ïƒ_ultimate/Ïƒ_allowable',
          inputs: [
            { id: 'ustress', label: 'label_ustress', units: ['Pa', 'MPa', 'GPa'] },
            { id: 'astress', label: 'label_astress', units: ['Pa', 'MPa', 'GPa'] },
            { id: 'safety', label: 'label_safety', units: [''] }
          ],
          calculate: (values) => {
            const uStress = values.ustress.value * unitConversions.stress[values.ustress.unit];
            const aStress = values.astress.value * unitConversions.stress[values.astress.unit];
            
            if (values.safety.value === '') {
              if (aStress === 0) throw new Error('err_zero');
              return { safety: uStress / aStress };
            } else if (values.ustress.value === '') {
              return { ustress: values.safety.value * aStress };
            } else if (values.astress.value === '') {
              if (values.safety.value === 0) throw new Error('err_zero');
              return { astress: uStress / values.safety.value };
            }
          },
          display: (lang, values, result) => {
            if (result.safety) {
              return `${translations[lang].result_safety}: ${result.safety.toFixed(2)}\n${translations[lang].formula_safety}: FS = Ïƒ_ultimate / Ïƒ_allowable`;
            } else if (result.ustress) {
              return `${translations[lang].label_ustress}: ${(result.ustress / unitConversions.stress[values.ustress.unit]).toFixed(4)} ${values.ustress.unit}\n${translations[lang].formula_safety}: Ïƒ_ultimate = FS Ã— Ïƒ_allowable`;
            } else if (result.astress) {
              return `${translations[lang].label_astress}: ${(result.astress / unitConversions.stress[values.astress.unit]).toFixed(4)} ${values.astress.unit}\n${translations[lang].formula_safety}: Ïƒ_allowable = Ïƒ_ultimate / FS`;
            }
          }
        }
      };

      // è‡ªåŠ¨æ£€æµ‹ç”¨æˆ·è¯­è¨€å’Œä¸»é¢˜
      let lang = 'zh';
      let darkMode = false;
      const userLang = navigator.language || navigator.userLanguage || '';
      if (userLang.toLowerCase().startsWith('en')) lang = 'en';
      
      // æ£€æµ‹ç³»ç»Ÿä¸»é¢˜è®¾ç½®
      if (window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches) {
        darkMode = true;
      }
      
      // æ¢å¤ç”¨æˆ·åå¥½
      if (localStorage.getItem('site-lang')) {
        lang = localStorage.getItem('site-lang');
      }
      if (localStorage.getItem('site-theme')) {
        darkMode = localStorage.getItem('site-theme') === 'dark';
      }

      // DOM å…ƒç´ 
      const calcForm = document.getElementById('calcForm');
      const formulaSelect = document.getElementById('formula-select');
      const formulaDisplay = document.getElementById('formulaDisplay');
      const resultBox = document.getElementById('resultBox');
      const themeSwitch = document.getElementById('theme-switch');
      const themeIcon = document.getElementById('theme-icon');
      const themeText = document.getElementById('theme-text');
      const langSwitch = document.getElementById('lang-switch');
      const langText = document.getElementById('lang-text');
      const chartCanvas = document.getElementById('resultChart');
      let resultChart = null;

      // åˆå§‹åŒ–å‡½æ•°
      function init() {
        setLanguage(lang);
        setTheme(darkMode);
        renderFormulaInputs(formulaSelect.value);
        updateFormulaDisplay(formulaSelect.value);
      }

      // è®¾ç½®è¯­è¨€
      function setLanguage(lng) {
        lang = lng;
        localStorage.setItem('site-lang', lng);
        document.documentElement.lang = lng === 'zh' ? 'zh-CN' : 'en-US';

        document.querySelectorAll('[data-i18n]').forEach(el => {
          const key = el.getAttribute('data-i18n');
          if (translations[lng][key]) {
            if (el.tagName === 'INPUT' || el.tagName === 'TEXTAREA') {
              el.placeholder = translations[lng][key];
            } else if (el.tagName === 'OPTION') {
              el.textContent = translations[lng][key];
            } else {
              el.textContent = translations[lng][key];
            }
          }
        });

        // æ›´æ–°è¯­è¨€åˆ‡æ¢æŒ‰é’®
        langText.textContent = lng === 'zh' ? 'EN' : 'ä¸­æ–‡';

        // æ›´æ–°å…¬å¼é€‰æ‹©å™¨é€‰é¡¹
        updateFormulaOptions();

        // é‡æ–°æ¸²æŸ“å½“å‰å…¬å¼
        renderFormulaInputs(formulaSelect.value);
        updateFormulaDisplay(formulaSelect.value);
      }

      // æ›´æ–°å…¬å¼é€‰æ‹©å™¨é€‰é¡¹
      function updateFormulaOptions() {
        const options = formulaSelect.querySelectorAll('option');
        options.forEach(option => {
          const key = option.getAttribute('data-i18n');
          if (translations[lang][key]) {
            option.textContent = translations[lang][key];
          }
        });
      }

      // è®¾ç½®ä¸»é¢˜
      function setTheme(isDark) {
        darkMode = isDark;
        localStorage.setItem('site-theme', isDark ? 'dark' : 'light');
        document.documentElement.setAttribute('data-theme', isDark ? 'dark' : 'light');
        
        themeIcon.textContent = isDark ? 'â˜€ï¸' : 'ğŸŒ™';
        themeText.setAttribute('data-i18n', isDark ? 'light_mode' : 'dark_mode');
        themeText.textContent = translations[lang][isDark ? 'light_mode' : 'dark_mode'];
      }

      // æ¸²æŸ“å…¬å¼è¾“å…¥å­—æ®µ
      function renderFormulaInputs(formulaKey) {
        const formula = formulas[formulaKey];
        if (!formula) return;
        
        let formHTML = '';
        
        // ä¸ºæ¯ä¸ªè¾“å…¥åˆ›å»ºå­—æ®µ
        formula.inputs.forEach(input => {
          const label = translations[lang][input.label] || input.label;
          const placeholder = translations[lang][`unit_${input.units[0].toLowerCase()}`] || input.units[0];
          
          formHTML += `
            <label for="${input.id}">${label}</label>
            <div class="input-group">
              <input type="number" id="${input.id}" step="any" placeholder="${placeholder}" autocomplete="off" />
              <select id="${input.id}-unit">
                ${input.units.map(unit => {
                  const unitText = translations[lang][`unit_${unit.toLowerCase()}`] || unit;
                  return `<option value="${unit}">${unitText}</option>`;
                }).join('')}
              </select>
            </div>
          `;
        });
        
        // æ·»åŠ æŒ‰é’®
        formHTML += `
          <div style="display:flex; gap:1rem;">
            <button type="button" id="calcBtn" data-i18n="calc_btn">${translations[lang].calc_btn}</button>
            <button type="button" id="clearBtn" data-i18n="clear_btn">${translations[lang].clear_btn}</button>
          </div>
        `;
        
        calcForm.innerHTML = formHTML;
        
        // æ·»åŠ äº‹ä»¶ç›‘å¬å™¨
        document.getElementById('calcBtn').addEventListener('click', calculate);
        document.getElementById('clearBtn').addEventListener('click', clearForm);
      }

      // æ›´æ–°å…¬å¼æ˜¾ç¤º
      function updateFormulaDisplay(formulaKey) {
        const formula = formulas[formulaKey];
        if (!formula) return;
        
        formulaDisplay.textContent = formula.name;
      }

      // è®¡ç®—å‡½æ•°
      function calculate() {
        const formulaKey = formulaSelect.value;
        const formula = formulas[formulaKey];
        if (!formula) return;
        
        try {
          // æ”¶é›†è¾“å…¥å€¼
          const values = {};
          formula.inputs.forEach(input => {
            const inputEl = document.getElementById(input.id);
            const unitEl = document.getElementById(`${input.id}-unit`);
            
            if (inputEl && unitEl) {
              values[input.id] = {
                value: inputEl.value.trim() === '' ? '' : parseFloat(inputEl.value),
                unit: unitEl.value
              };
            }
          });
          
          // éªŒè¯è¾“å…¥
          let filledCount = 0;
          for (const key in values) {
            if (values[key].value !== '') {
              filledCount++;
              if (values[key].value < 0) {
                throw new Error('err_invalid');
              }
            }
          }
          
          if (filledCount < 2) {
            throw new Error('err_two_values');
          }
          
          // æ‰§è¡Œè®¡ç®—
          const result = formula.calculate(values);
          
          // æ˜¾ç¤ºç»“æœ
          resultBox.textContent = formula.display(lang, values, result);
          
          // æ¸²æŸ“å›¾è¡¨ï¼ˆä»…é€‚ç”¨äºæ¨æ°æ¨¡é‡ï¼‰
          if (formulaKey === 'youngs' && resultChart) {
            resultChart.destroy();
          }
          
          if (formulaKey === 'youngs' && result && result.strain !== undefined && values.stress !== undefined) {
            renderStressStrainChart(values.stress.value, result.strain);
          }
          
        } catch (error) {
          resultBox.textContent = translations[lang][error.message] || error.message;
          if (resultChart) {
            resultChart.destroy();
            resultChart = null;
          }
        }
      }

      // æ¸²æŸ“åº”åŠ›-åº”å˜å›¾
      function renderStressStrainChart(stressValue, strainValue) {
        const ctx = chartCanvas.getContext('2d');
        
        if (resultChart) {
          resultChart.destroy();
        }
        
        // ç”Ÿæˆæ•°æ®ç‚¹
        const dataPoints = [];
        for (let i = 0; i <= 10; i++) {
          const strain = (strainValue * i) / 10;
          const stress = stressValue * (i / 10);
          dataPoints.push({ x: strain, y: stress });
        }
        
        resultChart = new Chart(ctx, {
          type: 'line',
          data: {
            datasets: [{
              label: translations[lang].formula_youngs,
              data: dataPoints,
              borderColor: '#006d77',
              backgroundColor: 'rgba(0, 109, 119, 0.1)',
              borderWidth: 2,
              pointRadius: 4,
              tension: 0.1
            }]
          },
          options: {
            responsive: true,
            maintainAspectRatio: false,
            scales: {
              x: {
                title: {
                  display: true,
                  text: translations[lang].result_strain
                }
              },
              y: {
                title: {
                  display: true,
                  text: `${translations[lang].result_stress} (Pa)`
                }
              }
            }
          }
        });
      }

      // æ¸…é™¤è¡¨å•
      function clearForm() {
        const inputs = calcForm.querySelectorAll('input[type="number"]');
        inputs.forEach(input => input.value = '');
        resultBox.textContent = '';
        
        if (resultChart) {
          resultChart.destroy();
          resultChart = null;
        }
      }

      // äº‹ä»¶ç›‘å¬å™¨
      formulaSelect.addEventListener('change', () => {
        renderFormulaInputs(formulaSelect.value);
        updateFormulaDisplay(formulaSelect.value);
        clearForm();
      });
      
      themeSwitch.addEventListener('click', () => {
        setTheme(!darkMode);
      });
      
      langSwitch.addEventListener('click', () => {
        setLanguage(lang === 'zh' ? 'en' : 'zh');
      });

      // åˆå§‹åŒ–
      init();
    })();
  </script>
</body>
</html>