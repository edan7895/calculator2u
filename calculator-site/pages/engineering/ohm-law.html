<!DOCTYPE html>
<html lang="auto">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title data-i18n="title">欧姆定律计算器 | Ohm's Law Calculator</title>
  <meta name="description" content="简单实用的欧姆定律计算器，支持根据电压、电流、电阻计算未知值。" />
  <meta name="keywords" content="欧姆定律, Ohm's Law, 电压, 电流, 电阻, 计算器" />
  <meta name="author" content="Calculator2U" />
  <style>
    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      margin: 0; background: #f9f9f9; color: #333;
      display: flex; flex-direction: column; min-height: 100vh;
    }
    .navbar {
      background-color: #003f5c;
      padding: 1rem 2rem;
      display: flex;
      justify-content: space-between;
      align-items: center;
      flex-wrap: wrap;
    }
    .navbar .logo {
      color: #fff;
      font-size: 1.5rem;
      font-weight: bold;
      text-decoration: none;
    }
    .nav-links {
      list-style: none;
      display: flex;
      gap: 1.2rem;
      margin: 0;
      padding-left: 0;
      align-items: center;
    }
    .nav-links a {
      color: #fff;
      text-decoration: none;
      font-weight: 500;
    }
    .lang-switch {
      background: transparent;
      border: 1.5px solid #fff;
      color: #fff;
      padding: 0.3rem 0.8rem;
      border-radius: 4px;
      cursor: pointer;
      font-weight: 600;
    }
    main.container {
      max-width: 600px;
      margin: 2rem auto 3rem auto;
      background: #fff;
      padding: 1.5rem 2rem;
      border-radius: 10px;
      box-shadow: 0 3px 12px rgb(0 0 0 / 0.1);
      flex-grow: 1;
    }
    h1 {
      text-align: center;
      color: #003f5c;
      font-size: 2rem;
      margin-bottom: 0.5rem;
    }
    p.desc {
      text-align: center;
      font-size: 1rem;
      color: #666;
      margin-bottom: 2rem;
    }
    form.calc-form {
      display: flex;
      flex-direction: column;
      gap: 1rem;
    }
    label {
      font-weight: 600;
      margin-bottom: 0.3rem;
      display: block;
      color: #003f5c;
    }
    input[type="number"] {
      padding: 0.6rem;
      font-size: 1rem;
      border-radius: 5px;
      border: 1.5px solid #ccc;
      width: 100%;
      box-sizing: border-box;
    }
    button {
      background-color: #003f5c;
      color: white;
      font-weight: 700;
      border: none;
      padding: 0.7rem 1rem;
      border-radius: 6px;
      cursor: pointer;
      font-size: 1rem;
      transition: background-color 0.3s ease;
      margin-top: 0.5rem;
    }
    button:hover {
      background-color: #005080;
    }
    .result-box {
      margin-top: 1.5rem;
      background: #e9f0fb;
      padding: 1rem;
      border-radius: 8px;
      font-family: 'Courier New', monospace;
      font-size: 1.1rem;
      color: #003f5c;
      white-space: pre-wrap;
      word-break: break-word;
      min-height: 3em;
    }
    footer {
      text-align: center;
      padding: 1.5rem 1rem;
      background: #f0f0f0;
      font-size: 0.9rem;
      color: #666;
      user-select: none;
    }
    @media (max-width: 480px) {
      main.container {
        margin: 1rem;
        padding: 1rem;
      }
      h1 {
        font-size: 1.6rem;
      }
    }
  </style>
</head>
<body>
  <nav class="navbar">
    <a href="/index.html" class="logo">Calculator2U</a>
    <ul class="nav-links">
      <li><a href="/pages/health/index.html" data-i18n="nav_health">健康与身体</a></li>
      <li><a href="/pages/finance/index.html" data-i18n="nav_finance">财务与投资</a></li>
      <li><a href="/pages/education/index.html" data-i18n="nav_education">教育与学习</a></li>
      <li><a href="/pages/engineering/index.html" data-i18n="nav_engineering">工程与科学</a></li>
      <li><a href="/pages/daily-life/index.html" data-i18n="nav_daily_life">日常生活</a></li>
      <li><button class="lang-switch" id="lang-switch">EN</button></li>
    </ul>
  </nav>

  <main class="container">
    <h1 data-i18n="title">欧姆定律计算器</h1>
    <p class="desc" data-i18n="desc">输入电压、电流或电阻的任意两个值，自动计算第三个值。</p>
    <form class="calc-form" onsubmit="return false;">
      <label for="voltage" data-i18n="label_voltage">电压 (U) - 伏特 (V)</label>
      <input type="number" id="voltage" step="any" placeholder="" autocomplete="off" />

      <label for="current" data-i18n="label_current">电流 (I) - 安培 (A)</label>
      <input type="number" id="current" step="any" placeholder="" autocomplete="off" />

      <label for="resistance" data-i18n="label_resistance">电阻 (R) - 欧姆 (Ω)</label>
      <input type="number" id="resistance" step="any" placeholder="" autocomplete="off" />

      <button type="button" id="calcBtn" data-i18n="calc_btn">计算</button>
      <button type="button" id="clearBtn" data-i18n="clear_btn">清除</button>
    </form>

    <div class="result-box" id="resultBox" aria-live="polite" aria-atomic="true"></div>
  </main>

  <footer>
    <p>&copy; 2025 Calculator2U. <span data-i18n="footer_rights">保留所有权利。</span></p>
  </footer>

  <script>
    (() => {
      const translations = {
        zh: {
          title: "欧姆定律计算器",
          desc: "输入电压、电流或电阻的任意两个值，自动计算第三个值。",
          nav_health: "健康与身体",
          nav_finance: "财务与投资",
          nav_education: "教育与学习",
          nav_engineering: "工程与科学",
          nav_daily_life: "日常生活",
          label_voltage: "电压 (U) - 伏特 (V)",
          label_current: "电流 (I) - 安培 (A)",
          label_resistance: "电阻 (R) - 欧姆 (Ω)",
          calc_btn: "计算",
          clear_btn: "清除",
          footer_rights: "保留所有权利。",
          err_two_values: "请至少输入两个数值。",
          err_invalid: "输入的值必须是非负数字。",
          result_voltage: "电压 (U)",
          result_current: "电流 (I)",
          result_resistance: "电阻 (R)"
        },
        en: {
          title: "Ohm's Law Calculator",
          desc: "Enter any two of voltage, current or resistance to calculate the third.",
          nav_health: "Health & Body",
          nav_finance: "Finance & Investment",
          nav_education: "Education & Learning",
          nav_engineering: "Engineering & Science",
          nav_daily_life: "Daily Life",
          label_voltage: "Voltage (U) - Volts (V)",
          label_current: "Current (I) - Amps (A)",
          label_resistance: "Resistance (R) - Ohms (Ω)",
          calc_btn: "Calculate",
          clear_btn: "Clear",
          footer_rights: "All rights reserved.",
          err_two_values: "Please enter at least two values.",
          err_invalid: "Input values must be non-negative numbers.",
          result_voltage: "Voltage (U)",
          result_current: "Current (I)",
          result_resistance: "Resistance (R)"
        }
      };

      // Detect device language
      let detectedLang = localStorage.getItem('site-lang') || (navigator.language.startsWith('zh') ? 'zh' : 'en');
      let lang = detectedLang;

      const setLanguage = (lng) => {
        lang = lng;
        localStorage.setItem('site-lang', lng);
        document.documentElement.lang = lng === 'zh' ? 'zh-CN' : 'en-US';

        // Update all text nodes with data-i18n attribute
        document.querySelectorAll('[data-i18n]').forEach(el => {
          const key = el.getAttribute('data-i18n');
          if (translations[lng][key]) {
            if (el.tagName.toLowerCase() === 'input' || el.tagName.toLowerCase() === 'textarea') {
              el.placeholder = translations[lng][key];
            } else {
              el.textContent = translations[lng][key];
            }
          }
        });

        // Update lang switch button label
        document.getElementById('lang-switch').textContent = lng === 'zh' ? 'EN' : '中文';
      };

      // Initialize language
      setLanguage(lang);

      // Language switch button
      document.getElementById('lang-switch').addEventListener('click', () => {
        setLanguage(lang === 'zh' ? 'en' : 'zh');
        clearResult();
      });

      // Calculation logic
      const voltageInput = document.getElementById('voltage');
      const currentInput = document.getElementById('current');
      const resistanceInput = document.getElementById('resistance');
      const resultBox = document.getElementById('resultBox');
      const calcBtn = document.getElementById('calcBtn');
      const clearBtn = document.getElementById('clearBtn');

      function isValidNumber(value) {
        return value !== '' && !isNaN(value) && Number(value) >= 0;
      }

      function clearResult() {
        resultBox.textContent = '';
      }

      function calculateOhmLaw() {
        const U = voltageInput.value.trim();
        const I = currentInput.value.trim();
        const R = resistanceInput.value.trim();

        // Count valid inputs
        const validInputs = [U, I, R].filter(v => isValidNumber(v));

        if (validInputs.length < 2) {
          resultBox.textContent = translations[lang].err_two_values;
          return;
        }

        // Convert to numbers
        const uNum = parseFloat(U);
        const iNum = parseFloat(I);
        const rNum = parseFloat(R);

        // Validate non-negative
        if ((U !== '' && !isValidNumber(U)) ||
            (I !== '' && !isValidNumber(I)) ||
            (R !== '' && !isValidNumber(R))) {
          resultBox.textContent = translations[lang].err_invalid;
          return;
        }

        // Calculate missing value
        // Cases:
        // If U and I known: R = U / I
        // If U and R known: I = U / R
        // If I and R known: U = I * R

        let resultStr = '';
        if (U !== '' && I !== '' && R === '') {
          if (iNum === 0) {
            resultBox.textContent = translations[lang].err_invalid;
            return;
          }
          const rCalc = uNum / iNum;
          resultStr = `${translations[lang].result_resistance}: ${rCalc.toFixed(4)} Ω`;
        } else if (U !== '' && R !== '' && I === '') {
          if (rNum === 0) {
            resultBox.textContent = translations[lang].err_invalid;
            return;
          }
          const iCalc = uNum / rNum;
          resultStr = `${translations[lang].result_current}: ${iCalc.toFixed(4)} A`;
        } else if (I !== '' && R !== '' && U === '') {
          const uCalc = iNum * rNum;
          resultStr = `${translations[lang].result_voltage}: ${uCalc.toFixed(4)} V`;
        } else if (U !== '' && I !== '' && R !== '') {
          // All three given, verify if consistent
          if (Math.abs(uNum - iNum * rNum) < 1e-6) {
            resultStr = lang === 'zh' ? '输入的值符合欧姆定律。' : 'Input values are consistent with Ohm\'s Law.';
          } else {
            resultStr = lang === 'zh' ? '输入的值不符合欧姆定律！' : 'Input values do NOT satisfy Ohm\'s Law!';
          }
        } else {
          resultStr = translations[lang].err_two_values;
        }

        resultBox.textContent = resultStr;
      }

      calcBtn.addEventListener('click', calculateOhmLaw);
      clearBtn.addEventListener('click', () => {
        voltageInput.value = '';
        currentInput.value = '';
        resistanceInput.value = '';
        clearResult();
      });
    })();
  </script>
</body>
</html>
