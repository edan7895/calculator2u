<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>体脂率计算器 | Calculator2U</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background: #fff;
      color: #333;
      margin: 0;
      padding: 0;
    }
    header, footer {
      background-color: #006d77;
      color: white;
      padding: 1rem 2rem;
    }
    .navbar {
      display: flex;
      justify-content: space-between;
      align-items: center;
      flex-wrap: wrap;
    }
    .navbar a.logo {
      color: #fff;
      font-weight: bold;
      font-size: 1.5rem;
      text-decoration: none;
    }
    .nav-links {
      display: flex;
      gap: 1rem;
      list-style: none;
      margin: 0;
      padding: 0;
    }
    .nav-links a {
      color: #fff;
      text-decoration: none;
      font-weight: 500;
    }
    .lang-switch {
      background: transparent;
      border: 1.5px solid #fff;
      border-radius: 4px;
      color: #fff;
      cursor: pointer;
      font-weight: 600;
      padding: 0.25rem 0.8rem;
    }
    main.container {
      max-width: 720px;
      margin: 2rem auto 4rem;
      padding: 0 1rem;
    }
    h1 {
      text-align: center;
      color: #008891;
      margin-bottom: 2rem;
    }
    form#bodyfat-form {
      display: flex;
      flex-direction: column;
      gap: 1rem;
      align-items: center;
      margin-bottom: 2rem;
    }
    form#bodyfat-form > div {
      display: flex;
      flex-direction: column;
      width: 100%;
      max-width: 400px;
    }
    label {
      font-weight: 600;
      margin-bottom: 0.3rem;
    }
    input, select {
      font-size: 1.1rem;
      padding: 0.4rem;
      border: 1px solid #aaa;
      border-radius: 5px;
    }
    button {
      background-color: #008891;
      border: none;
      color: white;
      font-weight: 700;
      font-size: 1.1rem;
      padding: 0.6rem 2rem;
      border-radius: 6px;
      cursor: pointer;
      margin-top: 1.2rem;
    }
    button:hover {
      background-color: #005f66;
    }
    #result-container {
      text-align: center;
      min-height: 150px;
    }
    #fat-value {
      font-size: 2.5rem;
      font-weight: 700;
      color: #008891;
      margin-bottom: 0.5rem;
    }
    #fat-category {
      font-size: 1.3rem;
      font-weight: 600;
      margin-bottom: 1.5rem;
    }
    table.fat-table {
      margin: 0 auto;
      border-collapse: collapse;
      max-width: 600px;
      width: 100%;
      font-size: 1rem;
      text-align: center;
      box-shadow: 0 0 12px rgba(0,0,0,0.1);
      border-radius: 8px;
      overflow: hidden;
    }
    table.fat-table thead {
      background-color: #008891;
      color: white;
    }
    table.fat-table th, table.fat-table td {
      padding: 10px 8px;
      border-bottom: 1px solid #ddd;
    }
    table.fat-table tbody tr:last-child td {
      border-bottom: none;
    }
    table.fat-table tbody tr:hover {
      background-color: #f0f8f9;
    }
    @media screen and (max-width: 640px) {
      form#bodyfat-form {
        padding: 0 1rem;
      }
    }
  </style>
</head>
<body>
<header>
  <nav class="navbar">
    <a href="/index.html" class="logo">Calculator2U</a>
    <ul class="nav-links">
      <li><a href="/pages/health/index.html">健康与身体</a></li>
      <li><a href="/pages/finance/index.html">财务与投资</a></li>
      <li><a href="/pages/education/index.html">教育与学习</a></li>
      <li><a href="/pages/engineering/index.html">工程与科学</a></li>
      <li><a href="/pages/daily-life/index.html">日常生活</a></li>
      <li><a href="/pages/about.html">关于我们</a></li>
      <li><button class="lang-switch" id="lang-switch">EN</button></li>
    </ul>
  </nav>
</header>

<main class="container">
  <h1 id="title">体脂率计算器</h1>
  <form id="bodyfat-form">
    <div>
      <label for="gender">性别</label>
      <select id="gender" required>
        <option value="male">男性</option>
        <option value="female">女性</option>
      </select>
    </div>
    <div><label for="age">年龄</label><input type="number" id="age" min="1" required /></div>
    <div><label for="height">身高 (cm)</label><input type="number" id="height" min="50" required /></div>
    <div><label for="neck">颈围 (cm)</label><input type="number" id="neck" min="10" required /></div>
    <div><label for="waist">腰围 (cm)</label><input type="number" id="waist" min="10" required /></div>
    <div id="hip-div"><label for="hip">臀围 (cm)</label><input type="number" id="hip" min="10" /></div>
    <button type="submit">计算</button>
  </form>

  <section id="result-container">
    <div id="fat-value"></div>
    <div id="fat-category"></div>

    <table class="fat-table">
      <thead><tr><th>体脂率 (%)</th><th>分类</th></tr></thead>
      <tbody>
        <tr><td>男：6-13<br>女：14-20</td><td>运动员</td></tr>
        <tr><td>男：14-17<br>女：21-24</td><td>健身型</td></tr>
        <tr><td>男：18-24<br>女：25-31</td><td>平均</td></tr>
        <tr><td>男：25+<br>女：32+</td><td>肥胖</td></tr>
      </tbody>
    </table>
  </section>
</main>

<footer>
  <p style="text-align:center;">&copy; 2025 Calculator2U 版权所有</p>
</footer>

<script>
  const form = document.getElementById('bodyfat-form');
  const fatValueEl = document.getElementById('fat-value');
  const fatCategoryEl = document.getElementById('fat-category');
  const hipDiv = document.getElementById('hip-div');
  const langBtn = document.getElementById('lang-switch');

  // 动态隐藏臀围字段（仅女性需要）
  document.getElementById('gender').addEventListener('change', e => {
    hipDiv.style.display = e.target.value === 'female' ? 'block' : 'none';
  });

  function calculateFat(gender, height, neck, waist, hip) {
    if (gender === 'male') {
      return 86.010 * Math.log10(waist - neck) - 70.041 * Math.log10(height) + 36.76;
    } else {
      return 163.205 * Math.log10(waist + hip - neck) - 97.684 * Math.log10(height) - 78.387;
    }
  }

  function getCategory(gender, fat) {
    if (gender === 'male') {
      if (fat < 6) return '过低';
      if (fat <= 13) return '运动员';
      if (fat <= 17) return '健身型';
      if (fat <= 24) return '平均';
      return '肥胖';
    } else {
      if (fat < 14) return '过低';
      if (fat <= 20) return '运动员';
      if (fat <= 24) return '健身型';
      if (fat <= 31) return '平均';
      return '肥胖';
    }
  }

  form.addEventListener('submit', e => {
    e.preventDefault();
    const gender = document.getElementById('gender').value;
    const height = parseFloat(document.getElementById('height').value);
    const neck = parseFloat(document.getElementById('neck').value);
    const waist = parseFloat(document.getElementById('waist').value);
    const hip = parseFloat(document.getElementById('hip').value) || 0;

    if (gender === 'female' && hip <= 0) {
      alert('请输入女性臀围');
      return;
    }

    const fat = calculateFat(gender, height, neck, waist, hip);
    const fatFixed = fat.toFixed(1);
    fatValueEl.textContent = fatFixed + '%';
    fatCategoryEl.textContent = getCategory(gender, fat);
  });

  // 简单语言切换（中英）
  langBtn.addEventListener('click', () => {
    const isZH = document.documentElement.lang === 'zh-CN';
    document.documentElement.lang = isZH ? 'en' : 'zh-CN';
    langBtn.textContent = isZH ? '中' : 'EN';
    document.getElementById('title').textContent = isZH ? 'Body Fat Calculator' : '体脂率计算器';
    document.querySelector('button[type=submit]').textContent = isZH ? 'Calculate' : '计算';
    document.querySelectorAll('label')[0].textContent = isZH ? 'Gender' : '性别';
    document.querySelectorAll('label')[1].textContent = isZH ? 'Age' : '年龄';
    document.querySelectorAll('label')[2].textContent = isZH ? 'Height (cm)' : '身高 (cm)';
    document.querySelectorAll('label')[3].textContent = isZH ? 'Neck (cm)' : '颈围 (cm)';
    document.querySelectorAll('label')[4].textContent = isZH ? 'Waist (cm)' : '腰围 (cm)';
    document.querySelectorAll('label')[5].textContent = isZH ? 'Hip (cm)' : '臀围 (cm)';
    document.querySelector('.fat-table thead').innerHTML = isZH
      ? '<tr><th>Body Fat %</th><th>Category</th></tr>'
      : '<tr><th>体脂率 (%)</th><th>分类</th></tr>';
  });
</script>
</body>
</html>
